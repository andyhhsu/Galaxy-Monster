<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galaxy æ€ªç‰© - äº’å‹•å•ç­”æŒ‘æˆ°è³½</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #1a1a2b;
            color: #ffffff;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
        }
        .screen {
            display: none;
            width: 100%;
            height: 100vh;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            box-sizing: border-box;
            position: absolute;
            top: 0;
            left: 0;
            transition: opacity 0.5s ease-in-out;
            animation: fadeIn 0.5s;
        }
        .screen.active {
            display: flex;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .btn-primary {
            background: linear-gradient(135deg, #8A2BE2, #4B0082);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(138, 43, 226, 0.4);
        }
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(138, 43, 226, 0.6);
        }
        .btn-primary:disabled {
            background: #5a5a7a;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
        }
        .timer-bar {
            height: 8px;
            background: linear-gradient(90deg, #8A2BE2, #4B0082);
            transition: width 0.1s linear;
        }
        .option-btn {
            transition: all 0.2s ease;
        }
        .option-btn.correct {
            background-color: #28a745 !important;
            border-color: #28a745 !important;
            transform: scale(1.05);
        }
        .option-btn.wrong {
            background-color: #dc3545 !important;
            border-color: #dc3545 !important;
            opacity: 0.7;
        }
        .option-btn.disabled {
            pointer-events: none;
        }
        .leaderboard-item {
            display: grid;
            grid-template-columns: 1fr 4fr 2fr;
            align-items: center;
            padding: 0.75rem 1.5rem;
        }
    </style>
</head>
<body class="w-full h-screen flex justify-center items-center">

    <!-- Start Screen -->
    <div id="start-screen" class="screen active">
        <div class="text-center">
            <h1 class="text-6xl md:text-8xl font-black tracking-wider" style="color: #c392ff;">GALAXY æ€ªç‰©</h1>
            <p class="text-2xl md:text-3xl mt-4 text-gray-300">æŒ‘æˆ°ä½ çš„ Galaxy çŸ¥è­˜é­‚ï¼</p>
            <button id="start-btn" class="btn-primary text-white font-bold py-4 px-12 text-2xl rounded-full mt-12">é–‹å§‹æŒ‘æˆ°</button>
            <button id="leaderboard-btn" class="block mx-auto mt-6 text-xl text-gray-400 hover:text-white transition">å³æ™‚æ’è¡Œæ¦œ</button>
        </div>
    </div>
    
    <!-- Rules Screen -->
    <div id="rules-screen" class="screen">
        <div class="glass-card p-8 md:p-12 text-center max-w-2xl">
            <h2 class="text-4xl font-bold mb-6">éŠæˆ²è¦å‰‡</h2>
            <ul class="text-xl space-y-4 text-left">
                <li>âœ”ï¸ å…± 10 é“é—œæ–¼ä¸‰æ˜Ÿ Galaxy çš„çŸ¥è­˜å•ç­”ã€‚</li>
                <li>â±ï¸ æ¯é¡Œé™æ™‚ 15 ç§’ï¼Œç­”é¡Œé€Ÿåº¦è¶Šå¿«ï¼Œåˆ†æ•¸è¶Šé«˜ï¼</li>
                <li>ğŸ† æŒ‘æˆ°æˆåŠŸå¾Œç™»éŒ„æˆç¸¾ï¼Œå°±æœ‰æ©ŸæœƒåƒåŠ æŠ½çï¼</li>
            </ul>
            <button id="play-btn" class="btn-primary text-white font-bold py-3 px-10 text-xl rounded-full mt-10">æˆ‘æº–å‚™å¥½äº†ï¼</button>
        </div>
    </div>

    <!-- Quiz Screen -->
    <div id="quiz-screen" class="screen">
        <div class="w-full max-w-4xl">
            <div class="flex justify-between items-center mb-4">
                <div id="question-counter" class="text-2xl font-bold">Q1 / 10</div>
                <div id="timer" class="text-2xl font-bold">15</div>
            </div>
            <div class="w-full bg-gray-700 rounded-full mb-6">
                <div id="timer-bar" class="timer-bar rounded-full"></div>
            </div>
            <div class="glass-card p-8 mb-8 min-h-[150px] flex items-center justify-center">
                <h2 id="question-text" class="text-3xl md:text-4xl text-center font-bold">å•é¡Œæ–‡å­—è¼‰å…¥ä¸­...</h2>
            </div>
            <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </div>
    </div>

    <!-- Score Screen -->
    <div id="score-screen" class="screen">
        <div class="glass-card p-8 md:p-12 text-center max-w-2xl">
            <h2 class="text-2xl text-gray-300">æŒ‘æˆ°å®Œæˆï¼</h2>
            <div class="my-4">
                <p class="text-7xl font-black" id="final-score">0</p>
                <p class="text-xl">åˆ†</p>
            </div>
            <div class="w-full space-y-4">
                <input id="nickname-input" type="text" placeholder="è¼¸å…¥ä½ çš„æš±ç¨±" class="w-full bg-transparent border-2 border-gray-500 rounded-lg py-3 px-4 text-white text-center text-xl focus:border-purple-500 focus:outline-none transition">
                <input id="phone-input" type="tel" placeholder="è¼¸å…¥é›»è©± (æŠ½çç”¨)" class="w-full bg-transparent border-2 border-gray-500 rounded-lg py-3 px-4 text-white text-center text-xl focus:border-purple-500 focus:outline-none transition">
                <button id="submit-score-btn" class="w-full btn-primary text-white font-bold py-3 px-10 text-xl rounded-lg">ç™»éŒ„æˆç¸¾</button>
            </div>
        </div>
    </div>

    <!-- Leaderboard Screen -->
    <div id="leaderboard-screen" class="screen">
        <div class="w-full max-w-4xl glass-card">
            <div class="p-6 border-b border-gray-700 flex justify-between items-center">
                <h2 class="text-4xl font-bold">å³æ™‚æ’è¡Œæ¦œ</h2>
                <button id="close-leaderboard-btn" class="text-4xl font-light text-gray-400 hover:text-white">&times;</button>
            </div>
            <div class="leaderboard-item text-lg font-bold text-gray-400">
                <span>æ’å</span>
                <span>æš±ç¨±</span>
                <span class="text-right">åˆ†æ•¸</span>
            </div>
            <div id="leaderboard-list" class="h-[60vh] overflow-y-auto">
                 <div id="leaderboard-message" class="p-8 text-center text-gray-400 text-xl">æ’è¡Œæ¦œè¼‰å…¥ä¸­...</div>
            </div>
        </div>
    </div>

    <!-- Thank You Screen -->
    <div id="thank-you-screen" class="screen">
        <div class="text-center">
            <h2 class="text-5xl font-bold">æ„Ÿè¬æ‚¨çš„åƒèˆ‡ï¼</h2>
            <p class="text-2xl mt-4 text-gray-300">æ‚¨çš„æˆç¸¾å·²æˆåŠŸç™»éŒ„ã€‚</p>
        </div>
    </div>

    <script>
        const questions = [
            { question: "Galaxy S ç³»åˆ—æ‰‹æ©Ÿçš„ã€Œè¶…æ˜äº®å¤œæ‹ã€åŠŸèƒ½ï¼Œä¸»è¦è§£æ±ºäº†ä»€éº¼æ‹ç…§ç—›é»ï¼Ÿ", options: ["ç™½å¤©ç…§ç‰‡éæ›", "è‡ªæ‹ä¸å¤ å¥½çœ‹", "åœ¨ä½å…‰æºç’°å¢ƒä¸‹æ‹å‡ºæ¸…æ™°æ˜äº®çš„ç…§ç‰‡", "ç„¡æ³•æ‹æ”è¶…å»£è§’ç…§ç‰‡"], answer: 2 },
            { question: "ç•¶ä½ æƒ³å°‡ Galaxy æ‰‹æ©Ÿä¸­çš„ç…§ç‰‡å¿«é€Ÿå‚³çµ¦æœ‹å‹çš„ä¸‰æ˜Ÿå¹³æ¿ï¼Œæ‡‰è©²ä½¿ç”¨å“ªå€‹å…§å»ºåŠŸèƒ½æœ€æ–¹ä¾¿ï¼Ÿ", options: ["SmartThings", "å¿«é€Ÿåˆ†äº« (Quick Share)", "Samsung DeX", "Bixby"], answer: 1 },
            { question: "Galaxy Z Fold ç³»åˆ—æ‘ºç–Šæ‰‹æ©Ÿåœ¨å±•é–‹å…§é è¢å¹•æ™‚ï¼Œæœ€å¤šå¯ä»¥åŒæ™‚é–‹å•Ÿå¹¾å€‹æ‡‰ç”¨ç¨‹å¼è¦–çª—é€²è¡Œå¤šå·¥è™•ç†ï¼Ÿ", options: ["ä¸€å€‹", "å…©å€‹", "ä¸‰å€‹", "å››å€‹"], answer: 2 },
            { question: "Galaxy Watch ä¸Šçš„ BioActive æ„Ÿæ‡‰å™¨ï¼Œä¸åŒ…å«ä»¥ä¸‹å“ªä¸€é …å¥åº·æ•¸æ“šåµæ¸¬ï¼Ÿ", options: ["èº«é«”çµ„æˆ (BIA)", "å¿ƒé›»åœ– (ECG)", "è¡€ç³–æ¿ƒåº¦", "è¡€æ°§é£½å’Œåº¦ (SpO2)"], answer: 2 },
            { question: "Samsung Wallet (åŸ Samsung Pay) é™¤äº†ä¿¡ç”¨å¡æ”¯ä»˜å¤–ï¼Œé‚„æ•´åˆäº†ä¸‹åˆ—å“ªé …ä¾¿åˆ©åŠŸèƒ½ï¼Ÿ", options: ["ç·šä¸Šè³¼ç‰©", "æ‚ éŠå¡èˆ‡é–€ç¦å¡", "è‚¡ç¥¨ä¸‹å–®", "ç¹³ç´é›»è²»"], answer: 1 },
            { question: "ä¸‰æ˜Ÿçš„ S Pen æœ€åˆæ˜¯ç‚ºå“ªå€‹ç¶“å…¸çš„æ——è‰¦ç³»åˆ—æ‰€è¨­è¨ˆçš„ï¼Ÿ", options: ["Galaxy S ç³»åˆ—", "Galaxy A ç³»åˆ—", "Galaxy Note ç³»åˆ—", "Galaxy Z ç³»åˆ—"], answer: 2 },
            { question: "Galaxy Buds ç³»åˆ—çš„ã€Œæ™ºæ…§ä¸»å‹•å¼é™å™ª (ANC)ã€åŠŸèƒ½ï¼Œå…¶æœ€å¤§ç‰¹è‰²æ˜¯ä»€éº¼ï¼Ÿ", options: ["åªèƒ½å®Œå…¨éš”çµ•å™ªéŸ³", "èƒ½åµæ¸¬ç”¨æˆ¶èªªè©±ä¸¦è‡ªå‹•åˆ‡æ›ç‚ºç’°å¢ƒéŸ³æ¨¡å¼", "åªèƒ½åœ¨ä¸‰æ˜Ÿæ‰‹æ©Ÿä¸Šä½¿ç”¨", "éœ€è¦æ‰‹å‹•é–‹å•Ÿæˆ–é—œé–‰"], answer: 1 },
            { question: "ä¸‰æ˜Ÿæ——è‰¦æ‰‹æ©Ÿè¢å¹•æ‰€ä½¿ç”¨çš„ã€ŒDynamic AMOLED 2Xã€æŠ€è¡“ï¼Œå…¶ä¸­ã€Œ2Xã€ä»£è¡¨äº†ä»€éº¼ï¼Ÿ", options: ["å…©å€çš„è§£æåº¦", "æ”¯æ´ 120Hz é«˜æ›´æ–°ç‡", "è¢å¹•å¯ä»¥å°æ‘ºäºŒæ¬¡", "äº®åº¦æ˜¯å‰ä»£çš„å…©å€"], answer: 1 },
            { question: "å¦‚æœä½ æƒ³ç”¨æ‰‹æ©Ÿçµ±ä¸€æ§åˆ¶å®¶ä¸­çš„ä¸‰æ˜Ÿé›»è¦–ã€å†°ç®±å’Œå†·æ°£ï¼Œæ‡‰è©²ä½¿ç”¨å“ªå€‹ Appï¼Ÿ", options: ["Galaxy Store", "Samsung Health", "SmartThings", "Bixby Home"], answer: 2 },
            { question: "ä¸‰æ˜Ÿç‚ºäº†æ°¸çºŒç™¼å±•è€Œæ¨å‹•çš„ã€ŒGalaxy for the Planetã€è¨ˆç•«ï¼Œä½¿ç”¨äº†ä¸‹åˆ—ä½•ç¨®å›æ”¶ææ–™ä¾†è£½ä½œéƒ¨åˆ†æ‰‹æ©Ÿå…ƒä»¶ï¼Ÿ", options: ["å›æ”¶å¯¶ç‰¹ç“¶", "å»¢æ£„æ¼ç¶²", "èˆŠå ±ç´™", "äºŒæ‰‹è¼ªèƒ"], answer: 1 }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let timerInterval;
        let timeLeft = 15;

        const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbyicc1D5u8AUwWeelxl0nllpuvGNI_VrPuDumur-814IgV45geq_d2V3kHsn1wNGQCaOw/exec';

        const screens = {
            start: document.getElementById('start-screen'),
            rules: document.getElementById('rules-screen'),
            quiz: document.getElementById('quiz-screen'),
            score: document.getElementById('score-screen'),
            leaderboard: document.getElementById('leaderboard-screen'),
            thankYou: document.getElementById('thank-you-screen')
        };
        const startBtn = document.getElementById('start-btn');
        const playBtn = document.getElementById('play-btn');
        const submitScoreBtn = document.getElementById('submit-score-btn');
        const nicknameInput = document.getElementById('nickname-input');
        const phoneInput = document.getElementById('phone-input');
        const leaderboardBtn = document.getElementById('leaderboard-btn');
        const closeLeaderboardBtn = document.getElementById('close-leaderboard-btn');

        function switchScreen(screenName) {
            Object.values(screens).forEach(screen => screen.classList.remove('active'));
            screens[screenName].classList.add('active');
        }

        function startGame() {
            currentQuestionIndex = 0;
            score = 0;
            showQuestion();
            switchScreen('quiz');
        }

        function showQuestion() {
            if (currentQuestionIndex >= questions.length) {
                endGame();
                return;
            }
            const questionData = questions[currentQuestionIndex];
            document.getElementById('question-counter').textContent = `Q${currentQuestionIndex + 1} / ${questions.length}`;
            document.getElementById('question-text').textContent = questionData.question;
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            questionData.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('option-btn', 'w-full', 'glass-card', 'p-4', 'text-xl', 'text-left', 'border-2', 'border-gray-600', 'hover:bg-purple-700', 'hover:border-purple-500');
                button.onclick = () => selectAnswer(index, questionData.answer);
                optionsContainer.appendChild(button);
            });
            startTimer();
        }

        function startTimer() {
            timeLeft = 15;
            document.getElementById('timer').textContent = timeLeft;
            const timerBar = document.getElementById('timer-bar');
            timerBar.style.width = '100%';
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft -= 0.1;
                timerBar.style.width = `${(timeLeft / 15) * 100}%`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    selectAnswer(-1, questions[currentQuestionIndex].answer);
                }
                document.getElementById('timer').textContent = Math.ceil(timeLeft);
            }, 100);
        }

        function selectAnswer(selectedIndex, correctIndex) {
            clearInterval(timerInterval);
            const options = document.querySelectorAll('.option-btn');
            options.forEach(btn => btn.classList.add('disabled'));
            if (selectedIndex === correctIndex) {
                score += 1000 + Math.floor(timeLeft * 100);
                options[selectedIndex].classList.add('correct');
            } else {
                if (selectedIndex !== -1) options[selectedIndex].classList.add('wrong');
                options[correctIndex].classList.add('correct');
            }
            setTimeout(() => {
                currentQuestionIndex++;
                showQuestion();
            }, 1500);
        }

        function endGame() {
            document.getElementById('final-score').textContent = score;
            switchScreen('score');
        }

        function saveScore() {
            const nickname = nicknameInput.value.trim();
            const phone = phoneInput.value.trim();
            if (!nickname || !phone) {
                alert('è«‹å‹™å¿…å¡«å¯«æš±ç¨±å’Œé›»è©±ï¼');
                return;
            }
            submitScoreBtn.disabled = true;
            submitScoreBtn.textContent = 'ä¸Šå‚³ä¸­...';
            
            const data = { nickname, phone, score };
            const queryParams = new URLSearchParams(data);
            const requestUrl = `${WEB_APP_URL}?${queryParams.toString()}`;

            // ä½¿ç”¨ "é€å‡ºå³æˆåŠŸ" æ¨¡å¼
            // æˆ‘å€‘ç™¼é€è«‹æ±‚ï¼Œä½†ä¸ç­‰å¾…å›æ‡‰ï¼Œä»¥é¿å…è·¨åŸŸå•é¡Œ
            fetch(requestUrl, { mode: 'no-cors' })
                .then(() => {
                    console.log("è³‡æ–™è«‹æ±‚å·²é€å‡ºã€‚");
                })
                .catch(error => {
                    // å³ä½¿å‡ºéŒ¯ï¼Œæˆ‘å€‘ä¹Ÿå‡å®šå®ƒæœƒæˆåŠŸï¼Œå› ç‚º no-cors æ¨¡å¼ä¸‹æœ¬ä¾†å°±æ•æ‰ä¸åˆ°å¤ªå¤šéŒ¯èª¤
                    console.error('é€å‡ºè«‹æ±‚æ™‚ç™¼ç”Ÿç¶²è·¯éŒ¯èª¤ (åœ¨ no-cors æ¨¡å¼ä¸‹æ˜¯æ­£å¸¸çš„):', error);
                });

            // ç«‹åˆ»åˆ‡æ›ç•«é¢ï¼Œæä¾›æµæš¢çš„ä½¿ç”¨è€…é«”é©—
            switchScreen('thankYou');
            setTimeout(() => {
                switchScreen('start');
                nicknameInput.value = '';
                phoneInput.value = '';
                submitScoreBtn.disabled = false;
                submitScoreBtn.textContent = 'ç™»éŒ„æˆç¸¾';
            }, 5000);
        }
        
        function showLeaderboard() {
            switchScreen('leaderboard');
            const leaderboardList = document.getElementById('leaderboard-list');
            const leaderboardMessage = document.getElementById('leaderboard-message');
            leaderboardMessage.textContent = 'æ’è¡Œæ¦œè¼‰å…¥ä¸­...';
            leaderboardList.innerHTML = '';
            leaderboardList.appendChild(leaderboardMessage);

            fetch(WEB_APP_URL)
                .then(res => {
                    if (!res.ok) {
                        throw new Error(`ç¶²è·¯éŒ¯èª¤ï¼ç‹€æ…‹ç¢¼: ${res.status}`);
                    }
                    return res.json();
                })
                .then(result => {
                    if (result.result === 'success') {
                        leaderboardList.innerHTML = '';
                        if (!result.data || result.data.length === 0) {
                            leaderboardMessage.textContent = 'ç›®å‰é‚„æ²’æœ‰äººæŒ‘æˆ°æˆåŠŸï¼Œå¿«ä¾†æ¶é ­é¦™ï¼';
                            leaderboardList.appendChild(leaderboardMessage);
                        } else {
                            result.data.forEach((player, index) => {
                                const item = document.createElement('div');
                                item.classList.add('leaderboard-item', 'text-xl', 'border-t', 'border-gray-700');
                                if (index < 3) item.classList.add('font-bold', 'text-yellow-300');
                                item.innerHTML = `
                                    <span>#${index + 1}</span>
                                    <span class="truncate">${player.nickname}</span>
                                    <span class="text-right">${player.score}</span>
                                `;
                                leaderboardList.appendChild(item);
                            });
                        }
                    } else {
                        throw new Error(result.message || 'å¾Œç«¯å›å ±ç„¡æ³•è§£ææ’è¡Œæ¦œè³‡æ–™');
                    }
                })
                .catch(error => {
                    console.error("è®€å–æ’è¡Œæ¦œå¤±æ•—:", error);
                    leaderboardList.innerHTML = '';
                    leaderboardMessage.textContent = `è®€å–æ’è¡Œæ¦œå¤±æ•—ã€‚è«‹æª¢æŸ¥è©¦ç®—è¡¨å…±ç”¨æ¬Šé™ï¼Œä¸¦ç¢ºèªç€è¦½å™¨ Console æ²’æœ‰éŒ¯èª¤è¨Šæ¯ã€‚`;
                    leaderboardList.appendChild(leaderboardMessage);
                });
        }

        // Event Listeners
        startBtn.onclick = () => switchScreen('rules');
        playBtn.onclick = startGame;
        submitScoreBtn.onclick = saveScore;
        leaderboardBtn.onclick = showLeaderboard;
        closeLeaderboardBtn.onclick = () => switchScreen('start');

    </script>
</body>
</html>

